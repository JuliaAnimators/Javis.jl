<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Tutorial 9: Morphing Javis Objects · Javis.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://JuliaAnimators.github.io/Javis.jl/tutorials/tutorial_morphing/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="Javis.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Javis.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../"><strong>Information about Tutorials - Beginners Start Here!</strong></a></li><li><a class="tocitem" href="../tutorial_1/"><strong>Tutorial 1:</strong> Making Your First Javis Animation!</a></li><li><a class="tocitem" href="../tutorial_2/"><strong>Tutorial 2:</strong> Cosmic Dancing and Javis Shorthand Expressions!</a></li><li><a class="tocitem" href="../tutorial_3/"><strong>Tutorial 3:</strong> What Are Objects?</a></li><li><a class="tocitem" href="../tutorial_4/"><strong>Tutorial 4:</strong> Rendering LaTeX with Javis!</a></li><li><a class="tocitem" href="../tutorial_5/"><strong>Tutorial 5:</strong> Do You Know Our Mascot? - Learn About Transitions And Actions!</a></li><li><a class="tocitem" href="../tutorial_6/"><strong>Tutorial 6:</strong> Taming the Elements</a></li><li><a class="tocitem" href="../tutorial_7/"><strong>Tutorial 7:</strong> Using Animations.jl to Create something with more Pep!</a></li><li><a class="tocitem" href="../tutorial_8/"><strong>Tutorial 8:</strong> Fun with Layers! An Intro to <code>@JLayer</code></a></li><li class="is-active"><a class="tocitem" href><strong>Tutorial 9:</strong> Morphing <code>Javis</code> Objects</a><ul class="internal"><li><a class="tocitem" href="#Morphing-one-object-to-another."><span>Morphing one object to another.</span></a></li><li><a class="tocitem" href="#Morphing-an-Object-using-a-Function"><span>Morphing an <code>Object</code> using a <code>Function</code></span></a></li><li><a class="tocitem" href="#Keyframed-morphs-using-Animations.jl"><span>Keyframed morphs using Animations.jl</span></a></li></ul></li><li><a class="tocitem" href="../tutorial_partialdraw/"><strong>Tutorial 10:</strong> Animating Creation of Objects</a></li></ul></li><li><a class="tocitem" href="../../howto/">HowTo</a></li><li><a class="tocitem" href="../../workflows/">Workflows</a></li><li><a class="tocitem" href="../../examples/">Examples</a></li><li><a class="tocitem" href="../../mission/">Mission</a></li><li><a class="tocitem" href="../../references/">References</a></li><li><a class="tocitem" href="../../contributing/">Contributing</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href><strong>Tutorial 9:</strong> Morphing <code>Javis</code> Objects</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href><strong>Tutorial 9:</strong> Morphing <code>Javis</code> Objects</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaAnimators/Javis.jl/blob/main/docs/src/tutorials/tutorial_morphing.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="**Tutorial-9:**-Morphing-Javis-Objects"><a class="docs-heading-anchor" href="#**Tutorial-9:**-Morphing-Javis-Objects"><strong>Tutorial 9:</strong> Morphing <code>Javis</code> Objects</a><a id="**Tutorial-9:**-Morphing-Javis-Objects-1"></a><a class="docs-heading-anchor-permalink" href="#**Tutorial-9:**-Morphing-Javis-Objects" title="Permalink"></a></h1><p>There are multiple ways to morph an object in Javis.</p><ul><li>Using <code>morph_to(::Object)</code> method. Any Object can be morphed to any other object using this method.</li><li>Using <code>morph_to(::Function)</code> method. Similar to <code>morph_to(::Object)</code> but morphs to a function instead. Can morph an object to a function that contains Luxor calls to draw what it should morphed into.</li><li>Specifying an Action with an  <code>Animation</code> along with <code>morph()</code> to make keyframed morphings. This helps making and timing a sequence of morph animations easier.</li></ul><h2 id="Morphing-one-object-to-another."><a class="docs-heading-anchor" href="#Morphing-one-object-to-another.">Morphing one object to another.</a><a id="Morphing-one-object-to-another.-1"></a><a class="docs-heading-anchor-permalink" href="#Morphing-one-object-to-another." title="Permalink"></a></h2><p>Like other animations <code>morph_to(::Object)</code> is to be used with action. To learn more about Actions refer to <a href="../tutorial_5/">Tutorial 5</a>. Here is a simple code snippet on how to use <code>morph_to</code>...</p><pre><code class="language-julia hljs">using Javis

video = Video(500,500)
nframes = 160 

function circdraw(color)
    sethue(color)
    setopacity(0.5)
    circle(O,100,:fillpreserve)
    setopacity(1.0)
    sethue(&quot;white&quot;)
    strokepath()
end

function boxdraw(color)
    sethue(color)
    box(O,100,100,:fillpreserve)
    setopacity(1.0)
    sethue(&quot;white&quot;)
    strokepath()
end
Background(1:nframes,(args...)-&gt;background(&quot;black&quot;))
boxobj  = Object((v,o,f) -&gt; boxdraw(&quot;green&quot;))
circobj = Object((v,o,f) -&gt; circdraw(&quot;red&quot;))

transform_to_box = Action(20:nframes-20, morph_to(boxobj))
act!(circobj, transform_to_box)
render(video,pathname=&quot;circ_to_box.gif&quot;)</code></pre><p><img src="../../assets/circ_to_box.gif" alt/></p><p>If you aren&#39;t familiar with this syntax <code>(v,o,f)-&gt; circdraw(&quot;red&quot;)</code> its an &quot;anonymous&quot; function or sometimes called a lambda function. Basically a nameless function that is written on the spot in that line of code . One might as well use any other function <code>func</code> in place of it (which takes at least 3 arguments <code>video,object,frame</code>). Elsewhere in the docs/tutorials you will come across something of the form <code>Object( (args...) -&gt; (&quot;some code here&quot;) )</code>. This is <a href="https://docs.julialang.org/en/v1/manual/faq/#The-two-uses-of-the-...-operator:-slurping-and-splatting">slurping</a> and is similar to packing <code>*args</code> in python. </p><p>We created two objects <code>circobj</code> and <code>boxobj</code> . <code>circobj</code> ofcourse is a circle because its drawing function <code>(v,o,f) -&gt; circdraw(&quot;red&quot;)</code> draws a circle, with a <code>color=red</code>, filling at <code>0.5</code> opacity, and then makes a white outline (stroke).  <code>boxobj</code>&#39;s function draws an opaque green box, with white outline.</p><p>This Object function is called repeatedly at render-time at every frame that the object exists to draw this object. The appropriate <code>video</code>,<code>object</code>, and <code>frame</code> are passed to this function at render time. Javis then has other tricks up its sleeve to scale/move/morph whats going to be drawn depending on the frame and object to effect out animations through Actions. This is roughly the idea behind Javis&#39;s Object-Action mechanism</p><p>We defined a <code>transform_to_box</code> Action which runs from frame 20 to lastframe-20 . The <code>Action</code> morphs whatever object its acted upon, into what looks like <code>boxobj</code>. Note that <code>boxobj</code> and <code>circobj</code> are separate objects all the time, even after the <code>Action</code> (it just happens that they overlap each other). As the Action keeps getting applied at render time frame by frame, the &quot;drawing&quot; of <code>circobj</code> starts to look like <code>boxobj</code>&#39;s drawing.</p><p>The Action is applied to the <code>circobj</code> with the <code>act!</code> function.</p><p>Note that the <code>boxobj</code> is present throughout as the <code>circobj</code> is morphing. If you want to hide it you can set its opacity to 0 with another action (to make it disappear) and set its frames to be drawn for 1 frame only (for efficiency).</p><pre><code class="language-julia hljs">Background(1:nframes,(args...)-&gt;background(&quot;black&quot;))
boxobj = Object(1:1 , (args...) -&gt; boxdraw(&quot;green&quot;) )
circobj = Object(1:nframes,(args...) -&gt; circdraw(&quot;red&quot;))

transform_to_box = Action(20:nframes-20, morph_to(boxobj))
hide_action = Action(1:1, (args...)-&gt;setopacity(0.0) )

act!(circobj, transform_to_box)
act!(boxobj, hide_action)

render(video,pathname=&quot;circ_to_box_hidden.gif&quot;)</code></pre><p>However you can directly specify a shape an object has to morph to without making an Object using <code>morph_to(f::Function)</code> i.e passing a function as an argument.</p><h2 id="Morphing-an-Object-using-a-Function"><a class="docs-heading-anchor" href="#Morphing-an-Object-using-a-Function">Morphing an <code>Object</code> using a <code>Function</code></a><a id="Morphing-an-Object-using-a-Function-1"></a><a class="docs-heading-anchor-permalink" href="#Morphing-an-Object-using-a-Function" title="Permalink"></a></h2><pre><code class="language-julia hljs">Background(1:nframes,(args...)-&gt;background(&quot;black&quot;))
#boxobj = Object(1:1 , (args...) -&gt; boxdraw(&quot;green&quot;) )
circobj = Object(1:nframes,(args...) -&gt; circdraw(&quot;red&quot;))

transform_to_box = Action(20:nframes-20, morph_to(boxdraw,[&quot;blue&quot;]))
#hide_action = Action(1:1, (args...)-&gt;setopacity(0.0) )

act!(circobj, transform_to_box)
#act!(boxobj, hide_action)

render(video,pathname=&quot;circ_to_box_func.gif&quot;)</code></pre><p><img src="../../assets/circ_to_box_func.gif" alt/></p><p>Here we have morphed  the circle  without defining an object to morph to. Rather the shape it has to morph into is given by a <code>Function</code>. The general syntax is <code>morph_to(fn::Function,args::Array=[])</code> . <code>args</code> is an array of arguments that is to be passed to the function. Here we morph <code>circobj</code> to a shape  that would is  drawn by <code>boxdraw(&quot;blue&quot;)</code>. Morphed Objects can be furthur morphed into other shapes by carrying out another <code>Action</code> further in the timeline.  </p><h2 id="Keyframed-morphs-using-Animations.jl"><a class="docs-heading-anchor" href="#Keyframed-morphs-using-Animations.jl">Keyframed morphs using Animations.jl</a><a id="Keyframed-morphs-using-Animations.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Keyframed-morphs-using-Animations.jl" title="Permalink"></a></h2><p>Another mechanism for morphing is by passing <code>morph()</code> to <code>Action</code> along with an <code>Animation</code> For a tutorial on how to use Animations.jl look at <a href="../tutorial_7/">Tutorial 7</a>,</p><pre><code class="language-julia hljs">using Javis
using Animations
video = Video(500,500)
nframes = 160 

function circdraw(color)
    sethue(color)
    setopacity(0.5)
    circle(O,50,:fillpreserve)
    setopacity(1.0)
    sethue(&quot;white&quot;)
    strokepath()
end

function boxdraw(color)
    sethue(color)
    box(O,100,100,:fillpreserve)
    setopacity(1.0)
    sethue(&quot;white&quot;)
    strokepath()
end

function stardraw()
    sethue(&quot;white&quot;)
    star(O,100,5,0.5,0.0,:stroke)
end

Background(1:nframes+10,(args...)-&gt;background(&quot;black&quot;))
boxobj = Object(1:nframes+10 , (args...) -&gt; boxdraw(&quot;green&quot;) )

anim = Animation([0,1],MorphFunction[(boxdraw,[&quot;green&quot;]),(circdraw,[&quot;red&quot;])] )

action = Action(1:nframes,anim,morph())
act!(boxobj,action)
render(video,pathname=&quot;box_to_circ_hidden.gif&quot;)</code></pre><p>Take a look at <code>anim</code>. It is of type <code>Animation</code>. First lets look at a simpler instance of <code>Animation</code>.</p><pre><code class="nohighlight hljs">Ex:1
Animation([0,1],[2,4])</code></pre><p>Think of Animations like  a &quot;map&quot; or a &quot;function&quot; (in the math sense) thats maps values from its first argument (<code>[0,1]</code> above) to another set of values (<code>[2,4]</code>) . This means that 0 gets mapped to 2 and 1 gets mapped to 4 and all values inbetween are linearly interpolated. Another Example</p><pre><code class="nohighlight hljs">Ex:2
Animation([0,0.3,1],[3,4.5,7])</code></pre><p>This animation maps 0 to 3 , 0.3 -&gt; 4.5 and 1-&gt;7. And all values inbetween are linear interpolations. </p><p>Take a look at the <code>Animations.jl</code> package for an indepth explanation on how to have different interpolations to make your animations look way cooler. ( for example the <code>sineio</code> interpolaation is slow at first speeds up in between and gradually slows to a halt )</p><p>One can in principle provide values beyond 0 and 1 for the first argument however Javis requires <code>Animation</code> objects to have the first argument to be from 0 to 1. This <code>Animation</code> object is passed to an <code>Action</code>, and Javis interprets 0 to be the first frame of the Action and 1 to be the final frame of the Action.</p><p>In the big code snippet above we can see that the second array passed to Animation is an array of <code>MorphFunction</code>s. <code>MorphFunction</code> is a struct . This struct has 2 fields. The fields are <code>func</code> and <code>args</code>. These arguments are used to specify drawing functions and the arguments to be passed to them , The <code>Array</code> of <code>MorphFunction</code> passed to the <code>Animation</code>  defines a sequence of shapes/drawings that the <code>Object</code> should be morphed into one by one in that order. Each shape/drawing is what would have been got by calling <code>func(args...)</code> of the respective <code>MorphFunction</code>. In the example above there are only two in shapes in the sequence a green box and a red circle (<code>boxdraw(&quot;green&quot;)</code> and <code>circdraw(&quot;red&quot;)</code>). Typically the first <code>MorphFunction</code> should draw the same thing that <code>Object</code> is.  </p><p>The general idea of whats going on is we are making an <code>Animation</code> that maps <code>0</code> (i.e the first frame of the action.) to <code>MorphFunction(boxdraw,[&quot;green&quot;])</code> and <code>1</code> (last frame of the action) to <code>MorphFunction(circdraw,[&quot;red&quot;])</code> and Javis handles the interpolation between them. </p><p>Thus we have made an  <code>Animation</code>  called <code>anim</code>. Then we made an <code>action</code> with this <code>anim</code>. We called it <code>action</code> . Then we applied the action on our object <code>boxobj</code> to get ... </p><p><img src="../../assets/box_to_circ_anim.gif" alt/></p><p>The way of morphing shines when you have to do multiple morphs in a sequence and with different timings. Lets look at another example taking object to morph box(initial shape) -&gt; star -&gt; circle in a sequence.</p><p>Change the lines describing the animation to </p><pre><code class="language-julia hljs">anim = Animation([0, 0.7, 1],MorphFunction[(boxdraw, [&quot;green&quot;]), (stardraw, []), (circdraw, [&quot;red&quot;])])</code></pre><p><code>stardraw</code> draws a white star without fill. The function does not take an argument and therefore the <code>Tuple</code> with <code>stardraw</code> should  have an empty <code>Array</code> at its second index. If your drawing functions do not take any arguments you can pass it as function itself, and need not wrap it in a <code>Tuple</code>.</p><p>Ex. suppose <code>mydraw1</code> , <code>mydraw2</code> and  <code>mydraw4</code> take a color as an argument but <code>mydraw3</code> does not take any arguments.</p><pre><code class="language-julia hljs">anim = Animation([0, t1, t2, 1],MorphFunction[ (mydraw1,[&quot;red&quot;]), (mydraw2,[&quot;blue&quot;]), mydraw3, (mydraw4,[&quot;black&quot;]) ])</code></pre><p>A third way to pass functions to morph into is to simply pass a function an its arguments in a <code>Tuple</code></p><pre><code class="language-julia hljs">anim = Animation([0, t1, t2, 1],MorphFunction[ (mydraw1,&quot;red&quot;), (mydraw2,&quot;blue&quot;), mydraw3, (mydraw4,&quot;black&quot;) ])</code></pre><p>When passed this way the first element of the Tuple is taken to be the function and the subsequent elements are the arguments to be passed to the function.</p><p><img src="../../assets/box_to_star_to_circ_anim.gif" alt/></p><p>What we see now is from the beginning to 0.7 fraction of the <code>Action</code>&#39;s frames it carries out the morphing from a <code>boxdraw(&quot;green&quot;)</code> to <code>stardraw()</code>.  And the remainder of the <code>Action</code>&#39;s frames it morphs from <code>stardraw()</code> to <code>circdraw(&quot;red&quot;)</code>. Once again , do look up Animations.jl and Tutorial 7 to see how you pass easing functions to manipulate the timing of animations (for example ... initially slow - fast in the middle - slow in the end) .  Now you know a bit about Morphing . Remember just like any other Action you can stack morphing actions with other Actions (translations, scaling etc) to bring about effects you desire. </p><blockquote><p><strong>Author(s):</strong> John George Francis (@arbitrandomuser)  <strong>Date:</strong> May 28th, 2022 <br/><strong>Tag(s):</strong> action, morphing, object, animation</p></blockquote></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../tutorial_8/">« <strong>Tutorial 8:</strong> Fun with Layers! An Intro to <code>@JLayer</code></a><a class="docs-footer-nextpage" href="../tutorial_partialdraw/"><strong>Tutorial 10:</strong> Animating Creation of Objects »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Tuesday 3 January 2023 00:13">Tuesday 3 January 2023</span>. Using Julia version 1.8.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
